## 声明文件

### 概述

声明文件的使用：

- 对于使用TS编写的文件，在编译为JS文件时会自动生成对应的声明文件（.d.ts），并将其一起发布

- 安装的第三方库中，有的会将其对应的声明文件集合在一起（有的需要通过`@types/`来安装其对应的声明文件），在导入并使用时通过这些声明文件来实现当前编写的TS文件中对应的类型判断

- 声明文件中声明了类型定义，不存在类型的赋值和实现\

- 相应配置：

  ```json
  {
      // 指定是否声明对应的声明文件（.d.ts文件）
      // 指定声明文件的输出路径
      "declaration": true,
      "declarationDir": "../TSBasic/dist" /
  }
  ```

例如，存在以下两个`.ts`文件：

```ts
//demo2.ts
export function addNum(x: number, y: number): number {
  return x + y;
}


// demo1.ts
import { addNum } from "./demo2";

console.log(addNum(1, 2));
```

在对以上的两个TS文件进行编译成JS文件并生成对应的声明文件后，在JS文件中Ctrl+点击例如`addNum`将跳转到其对应声明文件中对应函数类型的定义处

存在以下声明：

```ts
declare let/const // 声明全局变量
declare function // 声明全局方法
declare class //声明全局类
declare enum //声明全局枚举类型
declare namespace //声明含有子属性的全局对象
interface/type //声明全局类型
```

### 自定义声明文件

```ts
// 例如，这里需要使用jquery库中的$全局函数，但是由于没有安装jquery库的声明文件
// 因此，自定义创建一个声明文件
$(function () {});
$("div").css("border", "solid 1px red").css("color", "red");
data = 3;
```

创建对应的声明文件

```ts
declare function $(ready: () => void): void;
declare function $(selector: any): CssSelector;
type CssSelector = {
  // 返回this，实现css函数的连续调用
  css: (key: string, value: string) => this;
};
declare let data : number;
```

`declare`的能够省略：

- 如果在配置文件中设置了`"skipLibCheck": true`，则可以省略`declare

  ```ts
  declare function $(ready: () => void): void;
  // 省略declare
  function $(selector: any): CssSelector;
  type CssSelector = {
    // 返回this，实现css函数的连续调用
    css: (key: string, value: string) => this;
  };
  declare let data: number;
  interface Person {
      name: string,
      age : number,
  }
  type Type1 = number | string
  ```

- 反之，则不能省略、

### 命名空间和模块声明

避免在不同的声明文件出，因同名变量而造成命名冲突的问题

```ts
declare namespace Jquery {
  type cssSelector = {
    css: (key: string, value: string) => cssSelector;
  };

  export function $(ready: () => void): void;
  export function $(selector: any): cssSelector;

  // 嵌套的命名空间
  export namespace $ {
    function ajax(url: string, settings?: any): void;
  }
}
```

```ts
Jquery.$(function () {});
Jquery.$("div").css("border", "solid 1px red").css("color", "red");
```

模块声明的作用同命名空间，相较于命名空间，在使用时可以避免使用多次的`命名空间名.xxx`

```ts
declare module "JqueryMoudle" {
  type cssSelector = {
    css: (key: string, value: string) => cssSelector;
  };

  function $(ready: () => void): void;
  function $(selector: any): cssSelector;
  namespace $ {
    function ajax(url: string, settings?: any): void;
  }

  // export default $;
  export = $;
}
```

使用时：

```ts
import $ from "JqueryMoudle";
$(function () {});
$("div").css("border", "solid 1px red").css("color", "red");
```

### 在TS文件中引入JS文件

首先进行配置

```json
{
    "allowJs": true,  
}
```

然后进行导入使用（JS文件需与当前TS文件在同一目录）：

```ts
import { num } from "./test1.js";
console.log(num); // 1
```

